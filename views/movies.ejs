<!DOCTYPE html>
<html>
<%- include('partials/head') %> 
  <body>
    <%- include('partials/header') %> 

    <main class="container">
        <section class="row">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <div class="row">
                            <div class="col-12 col-md-4">
                                <%= title %> 

                            </div>
                            <div class="col-12 col-md-4">
                                <form action="/movies/filter" class="row">
                                    <div class="col-8">
                                        <select name="genero" id="" class="form-select">
                                            <option value="" selected hidden>Filtrar por género...</option>
                                            <% genres.forEach(genre => { %>
                                                <option value="<%= genre.id %>"><%= genre.name %></option>
                                            <% }) %>
                                        </select>
                                    </div>
                                    <div class="col-4">
                                        <button type="submit" class="btn btn-secondary">Filtrar</button>

                                    </div>
                                </form>
                            </div>
                            <div class="col-12 col-md-4">
                                <form class="d-flex" action="/movies/search">
                                    <input class="form-control me-2" type="search" placeholder="Buscar pelicula..." name="search">
                                    <button class="btn btn-outline-secondary" type="submit">Buscar</button>
                                  </form>
                            </div>
                        </div>
                    </div>
                    <div class="card-body table-responsive">
                        <table class="table table-hover">
                            <thead>
                              <tr>
                                <th scope="col">#</th>
                                <th scope="col">Nombre</th>
                                <th scope="col">Rating</th>
                                <th scope="col">Premios</th>
                                <th scope="col">Estreno</th>
                                <th scope="col">Genero</th>
                                <th scope="col">Acciones</th>
                              </tr>
                            </thead>
                            <tbody>
                                <% movies.forEach(movie => { %>
                                    <tr>
                                        <th scope="row"><%= movie.id %> </th>
                                        <td><%= movie.title %> </td>
                                        <td><%= movie.rating %> </td>
                                        <td><%= movie.awards %> </td>
                                        <td><%= movie.release_date.toLocaleDateString() %> </td>
                                        <td><%= movie.genre_id %> </td>
                                        <td>
                                            <div>
                                                <a class="btn btn-sm btn-primary" href="/movies/show/<%= movie.id %>">ver más</a>
                                            </div>
                                        </td>
                                      </tr>
                                <% }) %>
                            </tbody>
                          </table>
                    </div>
                </div>
            </div>
        </section>
    </main>



    <%- include('partials/scripts') %> 

  </body>
</html>
